# couples ticket

#### 介绍
情侣券：增进情侣感情的必备神器

#### 详细说明
[传送门](https://developers.weixin.qq.com/community/develop/article/doc/000002afb882701ca0fa756585b813)

#### 部署教程

##### 如何下载代码
点击右上角【克隆/下载】，支持git克隆和下载源码ZIP包。

##### 如何将代码导入到开发者工具
下载完成后，可以直接导入【微信开发者工具】，选择云开发模式，开通云开发。

##### 哪些参数需要修改
1. AppID（小程序ID）：注册小程序账号即可获得，小程序管理后台=>【开发】模块=>【开发设置】=>AppID。
替换场景：导入代码的时候，AppID替换成你自己的。

2. tmplIds（模版ID）：需在管理后台申请，小程序管理后台=>【订阅消息】=>【添加】=>搜索"兑换券被使用通知"=>【选用】=>勾选前四个关键词=>【提交】=》成
功后在【我的模版】复制【模版ID】。
替换场景：在代码中搜索"L0kSYZfFhwPNgI5zPEAzIsd5HFqVnUSxcsVO8pYss98"进行替换成你自己的模版ID。

##### 哪些云函数需要部署
所有云函数都需要部署。

##### 涉及到的外部服务
需要使用npm构建，有引用'dayjs'用于处理时间。

##### 云数据库中需要创建哪些数据
需要创建以下 6 张表：
- background：背景表，存放情侣券背景，可以存放一些系统背景。
- gives：领取记录表，领取时会添加一条领取记录。
- records：回忆记录表，使用后可以记录回忆。
- templates：情侣券模版表，可以存放一些系统模版。
- tickets：情侣券表，每次送出会新建一个情侣券。
- users：用户表，用于管理用户信息。

创建成功后，调整【数据权限】为“所有用户可读，仅创建者可读写”

##### 云存储中需要上传哪些文件
系统背景

##### 后台需要配置哪些服务
无

##### 数据维护指南
新增系统模版，系统背景。
直接导入数据文件，数据结构如下：
- templates：
{
	"backgroundurl": "图片路径",
	"info": "介绍", 
	"title": "标题", 
	"type": 0 // 0 系统 1 自定义
} 

- background
{
	"url": "图片路径"
} 

##### 联系方式
微信：chad_cym , 添加请备注：情侣券
